server {
  listen *:80;
  server_name ~^pages\.gitlab\.dp$;

  location / {
    proxy_pass http://127.0.0.1:4242/status$request_uri;
  }
}

server {
  listen *:80;
  server_name ~^(?<username>.*)\.gitlab\.dp$;

  location / {
    proxy_pass http://127.0.0.1:4242/pages/$username$request_uri;
  }
}